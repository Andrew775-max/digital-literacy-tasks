// Цыремпилов Андрей НКАбд-06-25

// Подключаем необходимые библиотеки
#include <iostream>  // Для операций ввода и вывода (cin, cout)
#include <string>    // Для работы со строковым типом данных
#include <vector>    // Для использования динамического массива vector
#include <algorithm> // Для доступа к функции сортировки sort
#include <limits>    // Для использования numeric_limits при очистке буфера

// Используем стандартное пространство имен
using namespace std;

// 30.Определить структуру с именем Printer содержащую следующие поля : 
// страна производитель; скорость печати(в мин); качество печати; цена. + написать функцию сортировки одного из полей структуры.

// Определяем структуру с именем Printer
struct Printer {
    string country;     // Поле для хранения названия страны-производителя
    int speed;          // Поле для хранения скорости печати в стр/мин
    string quality;     // Поле для хранения описания качества печати
    double price;       // Поле для хранения цены принтера

    // Конструктор для удобного создания объектов
    Printer(string c, int s, string q, double p)
        : country(c), speed(s), quality(q), price(p) {
    }

    // Метод для вывода информации о принтере
    void print() const {
        cout << "Страна: " << country
            << ", Скорость: " << speed << " стр/мин"
            << ", Качество: " << quality
            << ", Цена: " << price << " руб." << endl;
    }
};

// Функция для ввода целого числа с проверкой
int inputInt(const string& prompt) {
    int value; // Переменная для хранения введенного значения
    while (true) { // Бесконечный цикл для повторения при ошибке ввода
        cout << prompt; // Вывод приглашения для ввода
        if (cin >> value && value >= 0) { // Проверка успешности чтения и неотрицательности
            cin.ignore(numeric_limits<streamsize>::max(), '\n'); // Очистка буфера ввода
            return value; // Возврат корректного значения
        }
        cout << "Ошибка: введите целое неотрицательное число!\n"; // Сообщение об ошибке
        cin.clear(); // Сброс флагов ошибок потока ввода
        cin.ignore(numeric_limits<streamsize>::max(), '\n'); // Очистка буфера ввода
    }
}

// Функция для ввода дробного числа с проверкой
double inputDouble(const string& prompt) {
    double value; // Переменная для хранения введенного значения
    while (true) { // Бесконечный цикл для повторения при ошибке ввода
        cout << prompt; // Вывод приглашения для ввода
        if (cin >> value && value >= 0) { // Проверка успешности чтения и неотрицательности
            cin.ignore(numeric_limits<streamsize>::max(), '\n'); // Очистка буфера ввода
            return value; // Возврат корректного значения
        }
        cout << "Ошибка: введите неотрицательное число!\n"; // Сообщение об ошибке
        cin.clear(); // Сброс флагов ошибок потока ввода
        cin.ignore(numeric_limits<streamsize>::max(), '\n'); // Очистка буфера ввода
    }
}

// Функция для ввода строки
string inputString(const string& prompt) {
    string value; // Переменная для хранения введенной строки
    cout << prompt; // Вывод приглашения для ввода
    getline(cin, value); // Чтение всей строки включая пробелы
    return value; // Возврат введенной строки
}

// Функция ввода данных о принтере
Printer inputPrinter() {
    cout << "\nВведите данные о принтере:\n"; // Заголовок для ввода данных

    string country = inputString("Страна производитель: "); // Ввод страны производителя
    int speed = inputInt("Скорость печати (стр/мин): "); // Ввод скорости печати

    // Чистим буфер перед вводом качества
    string quality = inputString("Качество печати: "); // Ввод качества печати
    double price = inputDouble("Цена (руб.): "); // Ввод цены принтера

    return Printer(country, speed, quality, price); // Создание и возврат объекта Printer
}

// Функция сравнения для сортировки по цене (по возрастанию)
bool compareByPrice(const Printer& a, const Printer& b) {
// Функция сравнения для сортировки по скорости (по убыванию)
bool compareBySpeed(const Printer& a, const Printer& b) {
    return a.speed > b.speed; // Сравнение скоростей двух принтеров
}

// Функция сравнения для сортировки по стране (по алфавиту)
bool compareByCountry(const Printer& a, const Printer& b) {
    return a.country < b.country; // Сравнение названий стран двух принтеров
}

// Функция вывода списка принтеров
void printPrinters(const vector<Printer>& printers) {
    cout << "\n=== Список принтеров ===" << endl; // Заголовок списка
    for (size_t i = 0; i < printers.size(); ++i) { // Цикл по всем принтерам в векторе
        cout << i + 1 << ". "; // Вывод номера принтера в списке
        printers[i].print(); // Вывод информации о текущем принтере
    }
}

// Главная функция программы
int main() {
    // Установка русской локали
    setlocale(LC_ALL, "RU"); // Для корректного отображения русских символов

    cout << "=== ПРОГРАММА ДЛЯ РАБОТЫ С ДАННЫМИ О ПРИНТЕРАХ ===" << endl; // Заголовок программы
    cout << "Структура: страна, скорость, качество, цена" << endl; // Описание структуры данных
    cout << "=================================================" << endl; // Разделительная линия

    // Создание вектора для хранения принтеров
    vector<Printer> printers; // Объявление пустого вектора для хранения объектов Printer

    // Ввод количества принтеров
    int n = inputInt("\nВведите количество принтеров: "); // Запрос количества принтеров

    if (n == 0) { // Проверка на нулевое количество
        cout << "Количество принтеров равно 0. Программа завершена." << endl; // Сообщение о завершении
        return 0; // Завершение программы
    }

    // Ввод данных о принтерах
    for (int i = 0; i < n; ++i) { // Цикл для ввода данных о каждом принтере
        cout << "\n--- Принтер " << (i + 1) << " ---"; // Заголовок для текущего принтера
        printers.push_back(inputPrinter()); // Добавление нового принтера в вектор
    }

    // Вывод исходного списка
    cout << "\n=== Исходный список принтеров ==="; // Заголовок исходного списка
    printPrinters(printers); // Вывод всех принтеров до сортировки

    // Меню выбора сортировки
    cout << "\n=== ВЫБОР СОРТИРОВКИ ===" << endl; // Заголовок меню сортировки
    cout << "1 - Сортировка по цене (по возрастанию)" << endl; // Опция 1
    cout << "2 - Сортировка по скорости (по убыванию)" << endl; // Опция 2
    cout << "3 - Сортировка по стране (по алфавиту)" << endl; // Опция 3

    int choice = inputInt("Выберите тип сортировки (1-3): "); // Запрос выбора пользователя

    // Выполнение сортировки в зависимости от выбора
    switch (choice) { // Оператор выбора на основе ввода пользователя
    case 1: // Если выбран вариант 1
        sort(printers.begin(), printers.end(), compareByPrice); // Сортировка по цене
        cout << "\n=== Список принтеров отсортирован по цене (по возрастанию) ==="; // Сообщение
        break; // Выход из switch
    case 2: // Если выбран вариант 2
        sort(printers.begin(), printers.end(), compareBySpeed); // Сортировка по скорости
        cout << "\n=== Список принтеров отсортирован по скорости (по убыванию) ==="; // Сообщение
        break; // Выход из switch
    case 3: // Если выбран вариант 3
        sort(printers.begin(), printers.end(), compareByCountry); // Сортировка по стране
        cout << "\n=== Список принтеров отсортирован по стране (по алфавиту) ==="; // Сообщение
        break; // Выход из switch
    default: // Если введен неверный вариант
        cout << "\n=== Неверный выбор, вывод без сортировки ==="; // Сообщение об ошибке
        break; // Выход из switch
    }

    // Вывод отсортированного списка
    printPrinters(printers); // Вывод всех принтеров после сортировки

    return 0; // Успешное завершение программы
}
    return a.price < b.price; // Сравнение цен двух принтеров
}
